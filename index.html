<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <style>
      body {
        background-color: black;
        overflow: hidden;
      }
    </style>
    <script type="module">
      import kaboom from 'https://unpkg.com/kaboom/dist/kaboom.mjs';

      kaboom({
        global: true,
        fullscreen: true,
        scale: 2.5,
        debug: true,
        background: [51, 151, 255],
      });

      //KOULUTUS ALA LINKIT
      //https://www.keuda.fi/ala/humanistiset-taidealat/
      //https://www.keuda.fi/ala/kauppa-hallinto-oikeustieteet/
      //https://www.keuda.fi/ala/luonnontieteet/
      //https://www.keuda.fi/ala/maa-ja-metsatalousala-myos-puutarha-ala/
      //https://www.keuda.fi/ala/palvelualat/
      //https://www.keuda.fi/ala/tekniikan-alat/
      //https://www.keuda.fi/ala/terveys-hyvinvointialat/
      //https://www.keuda.fi/ala/tietojenkasittely-tietoliikenne-ict/
      //https://www.keuda.fi/ala/valmistava-yleissivistava-koulutus/
      //https://www.keuda.fi/ala/yhteiskunnallisetalat/
      

      let playerMoveSpeed = 150;
      let playerJumpForce = 250;
      let playerPoints = 0;

      let scopeA = 0;  // Humanistiset ja taidealat
      let scopeB = 0;  // Kauppa, hallinto ja oikeustieteet
      let scopeC = 0;  // Luonnontieteet
      let scopeD = 0;  // Maa- ja metsätalous
      let scopeE = 0;  // Palvelualat
      let scopeF = 0;  // Tekniikan alat
      let scopeG = 0;  // Terveys ja hyvinvointialat
      let scopeH = 0;  // Tietojenkäsittely ja tietoliikenne

      loadSprite('logo', 'Kuvat/keuda_logo.png');
      loadSprite('bg', 'Kuvat/tausta.png');
      loadSprite('ground', 'Kuvat/tausta_alareuna.png');
      loadSprite('mario', 'Kuvat/hahmo.png');
      loadSprite('mariojumpoff', 'Kuvat/hahmo_aloitus_tippuminen.png');
      loadSprite('suprise', 'Kuvat/block_tyhja_kysymys.png');
      loadSprite('spider', 'Kuvat/örkki.png');
      loadSprite('block', 'Kuvat/block.png');
      loadSprite('tunnel', 'Kuvat/ampari.png');
      loadSprite('arrow', 'Kuvat/nuoli.png');
      loadSprite('reminder', 'Kuvat/teksti_nuoli.png');
      loadSprite('empty', 'Kuvat/block_vastaus.png');

      let levels = [
        [
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                                                   £',
          '£                         D  E  F             -     £',
          '£                                                   £',
          '£             A  B  C                 G     I     ^ £',
          '£                                                   £',
          '£                        =========                + £',
          '£                       ===========                 £',
          '=====================================================',
        ],
        [
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                      £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                 =====                                 £',
          '£                    ==      ==            ======                       £',
          '£                                                    ===========        £',
          '£                                                                       £',
          '£                                                                  -    £',
          '£           A   B   C          D    E    F         G   H   I          ^ £',
          '£                                                                       £',
          '£                                                                     + £',
          '£                #                                          #           £',
          '=========================================================================',
        ],
        [
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                                                       £',
          '£                                               #                       £',
          '£                                          ======                       £',
          '£              =======          ==                                      £',
          '£                                               #                       £',
          '£                                          ======                       £',
          '£            A     B       ==  D  E  F                             -    £',
          '£                                                                     ^ £',
          '£                                                                     + £',
          '£                #                                          #           £',
          '=========================================================================',
        ],
      ];

      // LEVEL: 1
      scene('firstLevel', () => {
        debug.log('TASO 1');

        add([sprite('bg', { width: width(), height: height() }), pos(0, 0), fixed()]);
        add([sprite('ground', { width: screen.width, height: screen.height }), pos(0, 250), fixed()]);
        // add([sprite('logo', { width: 150, height: 50 }), pos(0, 580), fixed()]);

        let player = add([sprite('mario'), solid(), pos(140, 360), body(), area(), scale(0.7)]);

        addLevel(levels[0], {
          width: 20,
          height: 20,
          '=': () => [sprite('block'), solid(), area(), scale(0.44), ''],
          '£': () => [sprite('block'), solid(), area(), scale(0.44), ''],
          '+': () => [sprite('tunnel'), solid(), area(), scale(0.5), 'Tunnel'],
          '^': () => [sprite('arrow'), scale(0.5), 'Arrow'],
          '#': () => [sprite('spider'), solid(), area(), scale(1), 'Spider'],
          '-': () => [sprite('reminder'), area(), scale(0.25), 'Reminder'],
          'A': () => [sprite('suprise'), solid(), area(), scale(0.4), 'A'],
          'B': () => [sprite('suprise'), solid(), area(), scale(0.4), 'B'],
          'C': () => [sprite('suprise'), solid(), area(), scale(0.4), 'C'],
          'D': () => [sprite('suprise'), solid(), area(), scale(0.4), 'D'],
          'E': () => [sprite('suprise'), solid(), area(), scale(0.4), 'E'],
          'F': () => [sprite('suprise'), solid(), area(), scale(0.4), 'F'],
          'G': () => [sprite('suprise'), solid(), area(), scale(0.4), 'G'],
          'I': () => [sprite('suprise'), solid(), area(), scale(0.4), 'I'],
        });

        //--------------------------------------------------------------------
        add([text('TASO 1'), pos(125, 350), scale(0.2)]);

        // 1
        add([text('Kiinnostaako sinua enemman tyoskentely: \nulkona, sisalla vai molemmissa?'), pos(245, 310), scale(0.13)]);

        add([text('Ulkona'), pos(275, 365), scale(0.1)]);
        add([text('Sisalla'), pos(335, 365), scale(0.1)]);
        add([text('Molemmissa'), pos(385, 365), scale(0.1)]);

        player.onCollide('A', (A) => {
          let x = A.pos.x;
          let y = A.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeC++;
          scopeD++;
          scopeE++;
        })

        player.onCollide('B', (B) => {
          let x = B.pos.x;
          let y = B.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeA++;
          scopeB++;
          scopeF++;
          scopeG++;
          scopeH++;
        })

        player.onCollide('C', (C) => {
          let x = C.pos.x;
          let y = C.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeC++;
          scopeD++;
          scopeE++;
          scopeF++;
        })

        /// 2
        add([text('Tyoskenteletko mieluiten koneiden, \nihmisten vaiko elainten parissa?'), pos(505, 275), scale(0.13)]);

        add([text('Koneiden'), pos(513, 325), scale(0.1)]);
        add([text('Ihmisten'), pos(574, 325), scale(0.1)]);
        add([text('Elainten'), pos(633, 325), scale(0.1)]);

        player.onCollide('D', (D) => {
          let x = D.pos.x;
          let y = D.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeB++;
          scopeD++;
          scopeF++;
          scopeH++;
        })

        player.onCollide('E', (E) => {
          let x = E.pos.x;
          let y = E.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeA++;
          scopeC++;
          scopeE++;
          scopeG++;
        })

        player.onCollide('F', (F) => {
          let x = F.pos.x;
          let y = F.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeD++;
        })
        // 3
        add([text('Mika naista kuvaa sinua parhaiten?'), pos(740, 310), scale(0.13)]);

        add([text('Olen sosiaalinen ja \nviihdyn porukassa'), pos(730, 365), scale(0.1)]);
        add([text('Viihdyn parhaiten yksikseni'), pos(840, 365), scale(0.1)]);

        player.onCollide('G', (G) => {
          let x = G.pos.x;
          let y = G.pos.y;
          destroyAll('G')
          destroyAll('I')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeC++;
          scopeD++;
          scopeG++;
        })

        player.onCollide('I', (I) => {
          let x = I.pos.x;
          let y = I.pos.y;
          destroyAll('G')
          destroyAll('I')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeH++;
          scopeB++;
          scopeE++;
        })

        //--------------------------------------------------------------------
        player.onCollide('Tunnel', (Tunnel) => {
          go('secondLevel');
        });

        gravity(660);

        onUpdate('Spider', (Spider) => {
          Spider.move(-15, 0);
        });

        player.onCollide('Spider', (Spider) => {
          shake(10);
        });

        player.onUpdate(() => {
          camPos(player.pos);
        });

        //-------------------------------------------------------------------------
        onKeyDown('left', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        onKeyDown('a', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        //-------------------------------------------------------------------------
        onKeyDown('right', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        onKeyDown('d', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        //------------------------------------------------------------------------- 
        onKeyPress('space', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('up', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('w', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });
      });

      // LEVEL: 2
      scene('secondLevel', () => {
        debug.log('TASO 2');

        add([sprite('bg', { width: width(), height: height() }), pos(0, 0), fixed()]);
        add([sprite('ground', { width: screen.width, height: screen.height }), pos(0, 250), fixed()]);

        // add([sprite('logo', { width: 150, height: 50 }), pos(0, 580), fixed()]);
        let player = add([sprite('mario'), solid(), pos(140, 250), body(), area(), scale(0.7)]);

        // let player = add([sprite('mariojumpoff'), solid(), pos(140, 160), body(), area(), scale(0.8)]);

        gravity(660);

        addLevel(levels[1], {
          width: 20,
          height: 20,
          '=': () => [sprite('block'), solid(), area(), scale(0.44), 'Block'],
          '£': () => [sprite('block'), solid(), area(), scale(0.44), 'Wall'],
          '+': () => [sprite('tunnel'), solid(), area(), scale(0.5), 'Tunnel'],
          '^': () => [sprite('arrow'), scale(0.4), 'Arrow'],
          '#': () => [sprite('spider'), solid(), area(), scale(1), 'Spider'],
          '%': () => [sprite('suprise'), solid(), area(), scale(0.4), 'Suprise'],
          '-': () => [sprite('reminder'), area(), scale(0.2), 'Reminder'],
          'A': () => [sprite('suprise'), solid(), area(), scale(0.4), 'A'],
          'B': () => [sprite('suprise'), solid(), area(), scale(0.4), 'B'],
          'C': () => [sprite('suprise'), solid(), area(), scale(0.4), 'C'],
          'D': () => [sprite('suprise'), solid(), area(), scale(0.4), 'D'],
          'E': () => [sprite('suprise'), solid(), area(), scale(0.4), 'E'],
          'F': () => [sprite('suprise'), solid(), area(), scale(0.4), 'F'],
          'G': () => [sprite('suprise'), solid(), area(), scale(0.4), 'G'],
          'H': () => [sprite('suprise'), solid(), area(), scale(0.4), 'H'],
          'I': () => [sprite('suprise'), solid(), area(), scale(0.4), 'I'],
        });

        //--------------------------------------------------------------------
        add([text('TASO 2'), pos(125, 275), scale(0.2)]);


        // 1
        add([text('Mita naista teet mieluiten vapaa-ajallasi?'), pos(215, 230), scale(0.13)]);

        add([text('Teen taidetta'), pos(223, 286), scale(0.1)]);
        add([text('Rakentelen ja\n nikkaroin'), pos(300, 286), scale(0.1)]);
        add([text('Viihdyn luonnossa'), pos(380, 286), scale(0.1)]);

        player.onCollide('A', (A) => {
          let x = A.pos.x;
          let y = A.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeC++;
          scopeD++;
        })
        player.onCollide('B', (B) => {
          let x = B.pos.x;
          let y = B.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeH++;
          scopeF++;
          scopeE++;
          scopeG++;
        })
        player.onCollide('C', (C) => {
          let x = C.pos.x;
          let y = C.pos.y;
          destroyAll('A')
          destroyAll('B')
          destroyAll('C')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
          scopeE++;
          scopeH++;
          scopeG++;
          scopeF++;
        })

        /// 2
        add([text('Mita toivot tulevalta ammatiltasi?'), pos(620, 230), scale(0.13)]);

        add([text('Autan ja \npalvelen muita'), pos(600, 286), scale(0.1)]);
        add([text('Suunnittelua ja \njarjestelmallisyytta'), pos(690, 286), scale(0.1)]);
        add([text('Luovuutta ja \nkasilla tekemista'), pos(800, 286), scale(0.1)]);

        player.onCollide('D', (D) => {
          let x = D.pos.x;
          let y = D.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })
        player.onCollide('E', (E) => {
          let x = E.pos.x;
          let y = E.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })
        player.onCollide('F', (F) => {
          let x = F.pos.x;
          let y = F.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        // 3
        add([text('Kuinka toimit paineen alla?'), pos(1030, 230), scale(0.13)]);

        add([text('Hyvin, tykkaan \nhaasteista'), pos(1005, 286), scale(0.1)]);
        add([text('Huonosti, \nmenen lukkoon'), pos(1089, 286), scale(0.1)]);
        add([text('Tukeudun \nryhmalaisiini'), pos(1170, 286), scale(0.1)]);

        player.onCollide('G', (G) => {
          let x = G.pos.x;
          let y = G.pos.y;
          destroyAll('G')
          destroyAll('H')
          destroyAll('I')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })
        player.onCollide('H', (H) => {
          let x = H.pos.x;
          let y = H.pos.y;
          destroyAll('G')
          destroyAll('H')
          destroyAll('I')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })
        player.onCollide('I', (I) => {
          let x = I.pos.x;
          let y = I.pos.y;
          destroyAll('G')
          destroyAll('H')
          destroyAll('I')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        //--------------------------------------------------------------------

        player.onCollide('Tunnel', (Tunnel) => {
          go('thirdLevel');
        });

        onUpdate('Spider', (Spider) => {
          Spider.move(-15, 0);
        });

        player.onCollide('Spider', (Spider) => {
          shake(10);
        });

        player.onUpdate(() => {
          camPos(player.pos);
        });

        //-------------------------------------------------------------------------
        onKeyDown('left', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        onKeyDown('a', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        //-------------------------------------------------------------------------
        onKeyDown('right', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        onKeyDown('d', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        //------------------------------------------------------------------------- 
        onKeyPress('space', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('up', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('w', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });
      });

      // LEVEL: 3
      scene('thirdLevel', () => {
        debug.log('TASO 3');

        add([sprite('bg', { width: width(), height: height() }), pos(0, 0), fixed()]);
        add([sprite('ground', { width: screen.width, height: screen.height }), pos(0, 250), fixed()]);
        // add([sprite('logo', { width: 150, height: 50 }), pos(0, 580), fixed()]);

        let player = add([sprite('mario'), solid(), pos(140, 160), body(), area(), scale(0.7)]);

        gravity(660);

        addLevel(levels[2], {
          width: 20,
          height: 20,
          '=': () => [sprite('block'), solid(), area(), scale(0.44), ''],
          '£': () => [sprite('block'), solid(), area(), scale(0.44), ''],
          '+': () => [sprite('tunnel'), solid(), area(), scale(0.5), 'Tunnel'],
          '^': () => [sprite('arrow'), scale(0.4), 'Arrow'],
          '#': () => [sprite('spider'), solid(), area(), scale(1), 'Spider'],
          '*': () => [sprite('arrow'), solid(), area(), scale(0.5), 'Death'],
          '%': () => [sprite('suprise'), solid(), area(), scale(0.4), 'Suprise'],
          '-': () => [sprite('reminder'), area(), scale(0.2), 'Reminder'],
          'A': () => [sprite('suprise'), solid(), area(), scale(0.4), 'A'],
          'B': () => [sprite('suprise'), solid(), area(), scale(0.4), 'B'],
          'C': () => [sprite('suprise'), solid(), area(), scale(0.4), 'C'],
          'D': () => [sprite('suprise'), solid(), area(), scale(0.4), 'D'],
          'E': () => [sprite('suprise'), solid(), area(), scale(0.4), 'E'],
          'F': () => [sprite('suprise'), solid(), area(), scale(0.4), 'F'],
          'G': () => [sprite('suprise'), solid(), area(), scale(0.4), 'G'],
          'H': () => [sprite('suprise'), solid(), area(), scale(0.4), 'H'],
          'I': () => [sprite('suprise'), solid(), area(), scale(0.4), 'I'],
        });

        
        //--------------------------------------------------------------------
        add([text('TASO 3'), pos(125, 280), scale(0.2)]);

        // 1
        add([text('Haluatko tehda tyosi:'), pos(270, 230), scale(0.13)]);

        add([text('Aikataulua \nnoudattaen?'), pos(245, 286), scale(0.1)]);
        add([text('Joustavasti, \ntilanteen mukaan?'), pos(350, 286), scale(0.1)]);

        player.onCollide('A', (A) => {
          let x = A.pos.x;
          let y = A.pos.y;
          destroyAll('A')
          destroyAll('B')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        player.onCollide('B', (B) => {
          let x = B.pos.x;
          let y = B.pos.y;
          destroyAll('A')
          destroyAll('B')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        /// 2
        add([text('Haluatko tyon sisaltavan kirjoittamista'), pos(575, 230), scale(0.13)]);

        add([text('Kylla'), pos(610, 286), scale(0.1)]);
        add([text('Vahan'), pos(675, 286), scale(0.1)]);
        add([text('En'), pos(740, 286), scale(0.1)]);

        player.onCollide('D', (D) => {
          let x = D.pos.x;
          let y = D.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        player.onCollide('E', (E) => {
          let x = E.pos.x;
          let y = E.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        player.onCollide('F', (F) => {
          let x = F.pos.x;
          let y = F.pos.y;
          destroyAll('D')
          destroyAll('E')
          destroyAll('F')
          add([pos(x, y), sprite('empty'), area(), solid(), scale(0.4)]);
        })

        //--------------------------------------------------------------------


        player.onCollide('Tunnel', (Tunnel) => {
          go('firstLevel');
        });

        player.onCollide('Death', (Death) => {
          shake(50);
          go('thirdLevel');
        });

        onUpdate('Spider', (Spider) => {
          Spider.move(-15, 0);
        });

        player.onCollide('Spider', (Spider) => {
          shake(10);
        });

        player.onUpdate(() => {
          camPos(player.pos);
        });

        //-------------------------------------------------------------------------
        onKeyDown('left', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        onKeyDown('a', () => {
          player.move(-playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(true);
        });

        //-------------------------------------------------------------------------
        onKeyDown('right', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        onKeyDown('d', () => {
          player.move(playerMoveSpeed, 0);
          camPos(player.pos);
          player.flipX(false);
        });

        //------------------------------------------------------------------------- 
        onKeyPress('space', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('up', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });

        onKeyPress('w', () => {
          if (player.isGrounded()) {
            player.jump(playerJumpForce, 0);
          }
        });
      });

      onLoad(() => {
        go('firstLevel');
      });
    </script>
  </body>
</html>
